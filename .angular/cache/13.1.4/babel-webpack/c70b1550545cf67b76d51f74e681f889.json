{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\Telegram Desktop\\\\porto-project\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { busketbnterface, BusketData } from '../busketdata';\nlet BusketComponent = class BusketComponent {\n  constructor(http, router) {\n    var _this = this;\n\n    this.http = http;\n    this.router = router;\n    this.iteratorBusDblChek = 0;\n    this.SumPrice = 0; //GET THE CURENT USER BUSKET\n\n    this.mybusID = localStorage.getItem(\"deatails\");\n    this.MyBusketID = this.mybusID;\n    this.BusketProdact = [];\n    this.ROOT_URL = \"http://theporto.online/interwebapi/api/Busket/Get/\" + this.MyBusketID; //link to my external websyte with my data\n    // a:number=0;\n\n    this.busketbnterface = new busketbnterface();\n    this.BusketData = new BusketData();\n    this.SecItrtBsDblChk = 1;\n\n    this.delay = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (ms) {\n        return new Promise(res => setTimeout(res, ms));\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.time = true;\n    this.wait2sec = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield _this.delay(2000);\n      console.log(\"Waited 5s\");\n\n      _this.getBusket();\n\n      _this.time = false;\n    });\n  }\n\n  getBusket() {\n    //is a temp var to demonstrate my BusketID actualy i shuld get it from the token later\n    //my data get a strig with my data\n    this.http.get(this.ROOT_URL, {\n      withCredentials: true\n    }).subscribe(data => this.MyData = JSON.parse(data.toString())); //Users take the string and change it to json object\n\n    this.JSONBusPRDC = this.BusDblChek(this.MyData); //this for crossing on the array and take the first item\n\n    for (var a in this.JSONBusPRDC) {\n      let c = Number(a);\n      this.SumPrice += this.JSONBusPRDC[c].PRDPrice;\n    }\n  }\n\n  BusDblChek(mydata) {\n    for (var b in mydata) {\n      //to know the lenth of mydata\n      this.iteratorBusDblChek = Number(b);\n      console.log(mydata[b].PRDID);\n    }\n\n    for (var sum = 0; sum < this.iteratorBusDblChek; sum++) {\n      // to avoid undfined  --- this.iteratorBusDblChek=b!!!\n      this.SecItrtBsDblChk = sum; //  console.log(mydata[sum+1].PRDID+\"and\", JSON.stringify( mydata[sum+1 ]));//for(var d in mydata){bd=d+b}\n      //  console.log(JSON.stringify(mydata))\n      //check if in the array nothing like the first then check the second if nothing after equel then the next one\n\n      while (this.SecItrtBsDblChk < this.iteratorBusDblChek && mydata[sum] != undefined) {\n        //if its the last item exit\n        //   console.log(mydata[this.iteratorBusDblChek].PRDID + \"and\" + mydata[this.SecItrtBsDblChk + this.iteratorBusDblChek].PRDID);\n        //  if(!mydata[this.iteratorBusDblChek + this.SecItrtBsDblChk].PRDID){\n        //  }else{\n        if (mydata[this.SecItrtBsDblChk + 1] != undefined && mydata[sum].PRDID === mydata[this.SecItrtBsDblChk + 1].PRDID) {\n          console.log(mydata[sum].PRDID + \"its a same \", mydata[this.SecItrtBsDblChk + 1].PRDID); //for test\n\n          delete mydata[this.SecItrtBsDblChk + 1];\n          mydata[sum].Quentity++; // console.log(mydata[this.SecItrtBsDblChk+1 ].PRDID)\n\n          this.SecItrtBsDblChk++;\n        }\n\n        this.SecItrtBsDblChk++;\n      } //\n      // }\n\n    }\n\n    return mydata;\n  }\n\n  DeleteFromBusket(ITEM) {\n    this.http.delete(\"http://theporto.online/interwebapi/api/Busket/Delete/\" + ITEM).subscribe(res => this.s = res);\n    alert(this.s + \"מוצר מספר\" + ITEM + \" נמחק בהצלחה \");\n    window.location.reload();\n    this.getBusket();\n  }\n\n  ngOnInit() {\n    this.getBusket();\n    this.wait2sec();\n  }\n\n};\nBusketComponent = __decorate([Component({\n  selector: 'app-busket',\n  templateUrl: './busket.component.html',\n  styleUrls: ['./busket.component.less']\n})], BusketComponent);\nexport { BusketComponent };\n/*\r\n  //var to get the data from http request\r\n\r\ngetPosts(){\r\n\r\n  }\r\n\r\n*/","map":null,"metadata":{},"sourceType":"module"}