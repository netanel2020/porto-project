{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\Telegram Desktop\\\\porto-project\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Component, Injectable } from '@angular/core';\nimport { BusketData } from '../busketdata';\nimport * as i0 from \"@angular/core\";\nexport let ProdactsComponent = /*#__PURE__*/(() => {\n  class ProdactsComponent {\n    constructor(http, PostRequest) {\n      var _this = this;\n\n      this.http = http;\n      this.PostRequest = PostRequest; //myElement =0;// document.getElementsByClassName(\".conteiner\");\n      //links to my external websyte with my data\n\n      this.ROOT_URL = \"http://theporto.online/interwebapi/api/Prodact/Get\";\n      this.ROOT_URLPostBusket = \"http://theporto.online/interwebapi/api/Busket/addBusket/\";\n      this.chekIfDataExist = false;\n      this.BusketData = new BusketData();\n      this.manager = true;\n      this.time = true;\n      this.uploadProgress = 0; //my data get a strig with my data\n\n      this.delay = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (ms) {\n          return new Promise(res => setTimeout(res, ms));\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      this.num = localStorage.getItem(\"deatails\"); //function to wait till the html element will be proper to show the data from server\n\n      this.wait1sec = /*#__PURE__*/_asyncToGenerator(function* () {\n        yield _this.delay(1000);\n        console.log(\"Waited 5s\");\n\n        _this.getProduct();\n      });\n    } //function tp get items from api server\n\n\n    getProduct() {\n      this.http.get(this.ROOT_URL).subscribe(data => {\n        if (data != \"no data found\") {\n          console.log(data);\n          return this.Posts = JSON.parse(data.toString());\n        }\n      }); // this.http.get(this.ROOT_URL).subscribe(data => this.MyData = JSON.parse(data.toString()))\n      // this.Posts = this.MyData;\n      // console.log(this.MyData, \"hello\");\n      // console.log(this.Posts);\n      //Posts take the string and change it to json objec\n      //for test\n      //console.log(this.Posts);\n      // console.error;\n      // this.chekIfDataExistFunc();\n    } //the function get the prodact and send it to web api server\n\n\n    add_to_busket(items) {\n      this.BusketData.PRDID = items.PRDID; //adding the prodact id to class which save the data we need to save in the busket table\n\n      if (localStorage.getItem(\"deatails\")) {\n        this.BusketData.BusketId = this.num;\n      } else {\n        //if the user curently not register or sign in\n        alert(\"לשמירת הפריטים בסל מומלץ להירשם לאתר זה ממש בחינם ותמיד יש הטבות שוות\");\n        localStorage.setItem(\"busketTempRendom\", \"1\"); //to do == i need to set a func to check if there is no someone else with this current temporery rendom id\n      } //to do ==check is ip and save it as a busket id wehn he register take is prodact and send them with the right id from db\n\n\n      this.PostRequest.SavePost(this.BusketData, this.ROOT_URLPostBusket).subscribe(data => {\n        JSON.stringify(data); //   if (data.type == HttpEventType.UploadProgress) {\n        //    console.log(data.loaded);\n        //  }\n        //massege for user the process secssed\n\n        alert(\"the prodact\" + items.PRDname + \"is bin added to your busket sucssefoly\");\n      });\n    } //function to check if items is showing corectly\n\n\n    chekIfDataExistFunc() {\n      var element = document.getElementById('card');\n\n      if (typeof element != 'undefined' && element != null) {\n        this.chekIfDataExist = false; // Exists.\n\n        this.time = false;\n      } else {\n        // alert(\"המידע שלך לא הגיע טוען מחדש\")\n        this.wait1sec();\n      }\n    } //function to delete items\n\n\n    dalitem(item) {\n      this.http.delete(\"http://theporto.online/interwebapi/api/Prodact/Delete/\" + item).subscribe(res => {\n        this.s = res;\n      });\n      alert(this.s + \"מוצר מספר\" + item + \" נמחק בהצלחה \");\n    }\n\n    ngOnInit() {\n      this.getProduct();\n      this.wait1sec();\n\n      if (localStorage.getItem(\"ef7\") === \"True\") {\n        this.manager = true;\n      } else {\n        this.manager = false;\n      }\n    }\n\n  }\n\n  ProdactsComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ProdactsComponent,\n    factory: ProdactsComponent.ɵfac,\n    providedIn: 'root'\n  });\n  return ProdactsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}